###
# created by python script convert.py
# Felix Sterzelmaier, Concat AG
# Created: 2019-11-12 11:08:29 CET(+0100)
# Dependencies: pip install --upgrade pip
# Dependencies: pip install pyvmomi
# Dependencies: pip3.6 install --upgrade pip
# Dependencies: /usr/local/bin/pip3.6 install pyvmomi
# Test with: ansible-playbook (filename) --connection=local --check
# Run with: ansible-playbook (filename) --connection=local
# OR run with Python 2.7.5: ansible-playbook (filename) --connection=local -e 'ansible_python_interpreter=/usr/bin/python2'
# OR run with Python 2.7.16: ansible-playbook (filename) --connection=local -e 'ansible_python_interpreter=/usr/bin/python2.7'
# OR run with Python 3.6.8: ansible-playbook (filename) --connection=local -e 'ansible_python_interpreter=/usr/bin/python3'
# Run on: 10.10.5.239 as user ansible in path /home/ansible/
# Before reading this playbook please read the sourcecode of convert.py first!
###
---
- hosts: localhost
  vars:
    config: "A_oneview_config.json"
  tasks:

    - name: Gather facts about ID Pools IPV4 Subnets by name
      oneview_id_pools_ipv4_subnet_facts:
        config: "{{ config }}"
        name: '10.40.192.0_Subnet'
      delegate_to: localhost

    - set_fact: subnet_uri="{{ id_pools_ipv4_subnets[0].uri }}"
    - debug: var=subnet_uri

    - name: Create an Ethernet Network
      oneview_ethernet_network:
        config: "{{ config }}"
        state: present
        data:
            name:                   "b-oob-mgmt"
            ethernetNetworkType:    Tagged
            type:    ethernet-networkV4
            purpose:                Management
            smartLink:              true
            privateNetwork:         false
            vlanId:                 2100
            subnetUri:              "{{ subnet_uri }}"
            bandwidth:
               typicalBandwidth: 2500
               maximumBandwidth: 20000
      delegate_to: localhost

    - name: Create an Ethernet Network
      oneview_ethernet_network:
        config: "{{ config }}"
        state: present
        data:
            name:                   "ei-1300-48"
            ethernetNetworkType:    Tagged
            type:    ethernet-networkV4
            purpose:                Management
            smartLink:              true
            privateNetwork:         false
            vlanId:                 1300
            bandwidth:
               typicalBandwidth: 2500
               maximumBandwidth: 20000
      delegate_to: localhost

    - name: Gather facts about ID Pools IPV4 Subnets by name
      oneview_id_pools_ipv4_subnet_facts:
        config: "{{ config }}"
        name: '10.40.194.0_Subnet'
      delegate_to: localhost

    - set_fact: subnet_uri="{{ id_pools_ipv4_subnets[0].uri }}"
    - debug: var=subnet_uri

    - name: Create an Ethernet Network
      oneview_ethernet_network:
        config: "{{ config }}"
        state: present
        data:
            name:                   "ib-mgmt"
            ethernetNetworkType:    Tagged
            type:    ethernet-networkV4
            purpose:                Management
            smartLink:              true
            privateNetwork:         false
            vlanId:                 2101
            subnetUri:              "{{ subnet_uri }}"
            bandwidth:
               typicalBandwidth: 2500
               maximumBandwidth: 20000
      delegate_to: localhost

    - name: Gather facts about ID Pools IPV4 Subnets by name
      oneview_id_pools_ipv4_subnet_facts:
        config: "{{ config }}"
        name: '10.40.204.0_Subnet'
      delegate_to: localhost

    - set_fact: subnet_uri="{{ id_pools_ipv4_subnets[0].uri }}"
    - debug: var=subnet_uri

    - name: Create an Ethernet Network
      oneview_ethernet_network:
        config: "{{ config }}"
        state: present
        data:
            name:                   "iSCSI-A"
            ethernetNetworkType:    Tagged
            type:    ethernet-networkV4
            purpose:                Management
            smartLink:              true
            privateNetwork:         false
            vlanId:                 2110
            subnetUri:              "{{ subnet_uri }}"
            bandwidth:
               typicalBandwidth: 2500
               maximumBandwidth: 20000
      delegate_to: localhost

    - name: Gather facts about ID Pools IPV4 Subnets by name
      oneview_id_pools_ipv4_subnet_facts:
        config: "{{ config }}"
        name: '10.40.205.0_Subnet'
      delegate_to: localhost

    - set_fact: subnet_uri="{{ id_pools_ipv4_subnets[0].uri }}"
    - debug: var=subnet_uri

    - name: Create an Ethernet Network
      oneview_ethernet_network:
        config: "{{ config }}"
        state: present
        data:
            name:                   "iSCSI-B"
            ethernetNetworkType:    Tagged
            type:    ethernet-networkV4
            purpose:                Management
            smartLink:              true
            privateNetwork:         false
            vlanId:                 2111
            subnetUri:              "{{ subnet_uri }}"
            bandwidth:
               typicalBandwidth: 2500
               maximumBandwidth: 20000
      delegate_to: localhost

    - name: Gather facts about ID Pools IPV4 Subnets by name
      oneview_id_pools_ipv4_subnet_facts:
        config: "{{ config }}"
        name: '10.40.206.0_Subnet'
      delegate_to: localhost

    - set_fact: subnet_uri="{{ id_pools_ipv4_subnets[0].uri }}"
    - debug: var=subnet_uri

    - name: Create an Ethernet Network
      oneview_ethernet_network:
        config: "{{ config }}"
        state: present
        data:
            name:                   "iSCSI-Deployment"
            ethernetNetworkType:    Tagged
            type:    ethernet-networkV4
            purpose:                Management
            smartLink:              true
            privateNetwork:         false
            vlanId:                 2112
            subnetUri:              "{{ subnet_uri }}"
            bandwidth:
               typicalBandwidth: 2500
               maximumBandwidth: 20000
      delegate_to: localhost

    - name: Create an Ethernet Network
      oneview_ethernet_network:
        config: "{{ config }}"
        state: present
        data:
            name:                   "prod-1000-0"
            ethernetNetworkType:    Tagged
            type:    ethernet-networkV4
            purpose:                Management
            smartLink:              true
            privateNetwork:         false
            vlanId:                 1000
            bandwidth:
               typicalBandwidth: 2500
               maximumBandwidth: 20000
      delegate_to: localhost

    - name: Create an Ethernet Network
      oneview_ethernet_network:
        config: "{{ config }}"
        state: present
        data:
            name:                   "prt-1100-16"
            ethernetNetworkType:    Tagged
            type:    ethernet-networkV4
            purpose:                Management
            smartLink:              true
            privateNetwork:         false
            vlanId:                 1100
            bandwidth:
               typicalBandwidth: 2500
               maximumBandwidth: 20000
      delegate_to: localhost

    - name: Create an Ethernet Network
      oneview_ethernet_network:
        config: "{{ config }}"
        state: present
        data:
            name:                   "tst-1200-32"
            ethernetNetworkType:    Tagged
            type:    ethernet-networkV4
            purpose:                Management
            smartLink:              true
            privateNetwork:         false
            vlanId:                 1200
            bandwidth:
               typicalBandwidth: 2500
               maximumBandwidth: 20000
      delegate_to: localhost

    - name: Gather facts about ID Pools IPV4 Subnets by name
      oneview_id_pools_ipv4_subnet_facts:
        config: "{{ config }}"
        name: '10.40.200.0_Subnet'
      delegate_to: localhost

    - set_fact: subnet_uri="{{ id_pools_ipv4_subnets[0].uri }}"
    - debug: var=subnet_uri

    - name: Create an Ethernet Network
      oneview_ethernet_network:
        config: "{{ config }}"
        state: present
        data:
            name:                   "vSphereFT"
            ethernetNetworkType:    Tagged
            type:    ethernet-networkV4
            purpose:                Management
            smartLink:              true
            privateNetwork:         false
            vlanId:                 2106
            subnetUri:              "{{ subnet_uri }}"
            bandwidth:
               typicalBandwidth: 2500
               maximumBandwidth: 20000
      delegate_to: localhost

    - name: Gather facts about ID Pools IPV4 Subnets by name
      oneview_id_pools_ipv4_subnet_facts:
        config: "{{ config }}"
        name: '10.40.196.0_Subnet'
      delegate_to: localhost

    - set_fact: subnet_uri="{{ id_pools_ipv4_subnets[0].uri }}"
    - debug: var=subnet_uri

    - name: Create an Ethernet Network
      oneview_ethernet_network:
        config: "{{ config }}"
        state: present
        data:
            name:                   "vSphereVMotion"
            ethernetNetworkType:    Tagged
            type:    ethernet-networkV4
            purpose:                Management
            smartLink:              true
            privateNetwork:         false
            vlanId:                 2102
            subnetUri:              "{{ subnet_uri }}"
            bandwidth:
               typicalBandwidth: 2500
               maximumBandwidth: 20000
      delegate_to: localhost

    - name: Gather facts about ID Pools IPV4 Subnets by name
      oneview_id_pools_ipv4_subnet_facts:
        config: "{{ config }}"
        name: '10.40.210.0_Subnet'
      delegate_to: localhost

    - set_fact: subnet_uri="{{ id_pools_ipv4_subnets[0].uri }}"
    - debug: var=subnet_uri

    - name: Create an Ethernet Network
      oneview_ethernet_network:
        config: "{{ config }}"
        state: present
        data:
            name:                   "a-oob-mgmt"
            ethernetNetworkType:    Tagged
            type:    ethernet-networkV4
            purpose:                Management
            smartLink:              true
            privateNetwork:         false
            vlanId:                 2116
            subnetUri:              "{{ subnet_uri }}"
            bandwidth:
               typicalBandwidth: 2500
               maximumBandwidth: 20000
      delegate_to: localhost

